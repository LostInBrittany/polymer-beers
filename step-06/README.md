# Polymer Beers - Polymer tutorial - Step 06

Enough of building an app with five beers in a hard-coded dataset! Let's fetch a larger dataset from our server using one of [Polymer iron elements](https://elements.polymer-project.org/browse?package=iron-elements) called [`iron-ajax`](https://elements.polymer-project.org/elements/iron-ajax).

## Data ##

Our new dataset is now a list of 11 beers stored in JSON format in the `step-06/beers/beers.json` file in your project. You need to put the file into `app/beers/beers.json` to make it available from the server at the URL `http://127.0.0.1:8000/app/beers/beers.json`.

`app/beers/beers.json`:

```json
[
  ...
  {
    "alcohol": 6.8,
    "description": "A reddish-brown abbey ale brewed with dark malts. The secondary fermentation gives a fruity aroma and a unique spicy character with a distinctive aftertaste. Secondary fermentation in the bottle.",
    "id": "AffligemDubbel",
    "img": "beers/img/AffligemDubbel.jpg",
    "name": "Affligem Dubbel"
  },
  ...
]
```

## `iron-ajax` element

We will use the `iron-ajax` to  to make an HTTP request to your web server to fetch the data in the `app/beers/beers.json` file. 

`iron-ajax` is one of the elements in the [Polymer iron elements](https://elements.polymer-project.org/browse?package=iron-elements) collection, a set of visual and non-visual utility elements. They include elements for working with layout, user input, selection, and scaffolding apps.

`iron-ajax` makes an HTTP GET request to our web server, asking for `beers/beers.json` (the url is relative to our `index.html` file). The server responds by providing the data in the JSON file. (The response might just as well have been dynamically generated by a backend server. To the browser and our app they both look the same. For the sake of simplicity we used a JSON file in this tutorial.)

To use `iron-ajax` in our application we need:

1. Add its dependency to `bower.json` and do a `bower install` (this step is not important for the tutorial as all dependencies are already recovered and ready in the `bower_components` folder).

  ```JSON
  {
    "name": "polymer-beers",
    "version": "0.0.0",
    "license": "http://polymer.github.io/LICENSE.txt",
    "dependencies": {    
      "bootstrap": "~3.3.4",
      "polymer": "~1.0.0",
      "iron-ajax": "PolymerElements/iron-ajax#^1.0.0"
    }
  }
  ``` 

1. Import `iron-ajax` in `beer-list`

```html
<!-- Import iron-ajax to get the list of beers from the server -->
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
```

Then we can place an `iron-ajax` element in `beer-list` to request the beer list to the server:

```html
    <iron-ajax
      auto
      url="../beers/beers.json"
      params='{}'
      handle-as="json"
      on-response="gotBeers"
      debounce-duration="300"></iron-ajax>
```

In the `on-response` attribute we define what callback function will be called when the data is collected.
We use that callback function to initialize the beers object.

The callback has two parameters, an event object that has all the information about the request life, and a [`iron-request`](https://elements.polymer-project.org/elements/iron-ajax?active=iron-request) object, where we can call the `response` property to get directly the response data.

```javascript
    gotBeers: function(event, ironRequest) {
      this.beers = ironRequest.response;
    }
```

We can then forget the static initialization and simple declare `beers` as an empty array in the `ready` function:

```javascript
  ready: function() {
    this.beers = [];
    ...
```      


You can see all the details on using `iron-ajax` on its [documentation page](https://elements.polymer-project.org/elements/iron-ajax).

## Showing more information

As now we recover more information for each beer (an id and an image URL), we are going to modify `beer-list-item` element to show it.

We begin by adding the missing properties:

```javascript
  properties: {
    id: String,
    name: String,
    description: String,
    img: String,
    alcohol: String
  }
```

Then we modify the template:

```html
  <template>
    <div id="{{id}}" class="beer clearfix">
      <img class="pull-right el-img" src="{{img}}">
      <h2 class="el-name">{{name}}</h2>
      <p class="el-description">{{description}}</p>
      <p class="pull-right el-alcohol">Alcohol content: <span>{{alcohol}}</span>%</p>
    </div>
  </template>
```

And we add some CSS to make things prettier:

```css
  <style>
    .beer {
      margin: 10px;
      padding: 10px;
      border: solid 1px black;
      border-radius: 10px;
      min-height: 150px;
    }
    .el-img {
      max-height: 100px;
    }
    .el-alcohol {
      clear:both;
    }
  </style>
```


![Screenshot](/img/step-06_01.jpg)  

